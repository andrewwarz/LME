<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title> Logging Made Easy </title>
    <meta property="og:title" content="LME">
    <meta property="og:locale" content="en_US">
    <meta name="description" content="Logging Made Easy">

    <link rel="stylesheet" href="pages/assets/css/style.css">
</head>

<body>
    <div class="wrapper">
        <header>
            <div class="side-nav">
                <img class="logo" src="pages/assets/imgs/lme-image.png" alt="Logo">
                <div class="version">v2.0</div>
                <div class="nav-links">
                    <a href="index.html">Overview</a>
                    <a href="pages/installation-overview.html">Installation</a>
                        <a href="pages/documentation.html">Documentation</a>
                </div>
            </div>
        </header>
        <main>
            <section>
                <div class="body-text">
            <h2 id="5-password-encryption">5. Password Encryption:</h2>
            <p>Ansible-vault is used to enable password encryption, securely storing all LME user and service user
                passwords at rest
                We do submit a hash of the password to Have I Been Pwned to check to see if it is compromised: <a
                    href="https://haveibeenpwned.com/FAQs">READ MORE HERE</a>, but since they&#39;re all randomly
                generated this should be rare.</p>
            <h3 id="where-are-passwords-stored">Where Are Passwords Stored?:</h3>
            <pre><code class="language-bash"># Define user-specific paths
USER_VAULT_DIR=&quot;/etc/lme/vault&quot;
PASSWORD_FILE=&quot;/etc/lme/pass.sh&quot;
</code></pre>
            <h3 id="grabbing-passwords">Grabbing Passwords:</h3>
            <p>To view the appropriate service user password run the following commands:</p>
            <pre><code>#script:
$CLONE_DIRECTORY/scripts/extract_secrets.sh -p #to print

#add them as variables to your current shell
source $CLONE_DIRECTORY/scripts/extract_secrets.sh #without printing values
source $CLONE_DIRECTORY/scripts/extract_secrets.sh -q #with no output
</code></pre>
            <h3 id="manually-setting-up-passwords-and-accessing-passwords-unsupported">Manually Setting Up Passwords and
                Accessing Passwords <strong>Unsupported</strong>:</h3>
            <p><strong>These steps are not fully supported by CISA and are left if others would like to support this in
                    their environment</strong></p>
            <p>Run the password_management.sh script:</p>
            <pre><code class="language-bash">lme-user@ubuntu:~/LME-TEST$ sudo -i ${PWD}/scripts/password_management.sh -h
-i: Initialize all password environment variables and settings
-s: set_user: Set user password
-p: Manage Podman secret
-l: List Podman secrets
-h: print this list
</code></pre>
            <p>A cli one liner to grab passwords (this also demonstrates how we&#39;re using Ansible-vault in
                extract_secrets.sh):</p>
            <pre><code class="language-bash">#where wazuh_api is the service user whose password you want:
USER_NAME=wazuh_api
sudo -i ansible-vault view /etc/lme/vault/$(sudo -i podman secret ls | grep $USER_NAME | awk &#39;{print $1}&#39;)
</code></pre>
</div>
</section>

        </main>
        </div>

</html>