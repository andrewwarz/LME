<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Password Encryption</title>
    <meta property="og:title" content="LME">
    <meta property="og:locale" content="en_US">
    <meta name="description"
        content="Logging Made Easy - CISA's open source platform for centralized log collection and threat detection">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <div class="wrapper">
        <header>
            <div class="side-nav">
                <img class="logo" src="assets/imgs/lme-image.png" alt="Logging Made Easy Logo">
                <div class="version">v2.0</div>
                <div class="nav-links">
                    <a href="..\index.html"><i class="fas fa-info-circle"></i> About</a>
                    <a href="installation-overview.html"><i class="fas fa-download"></i> Installation</a>
                    <a class="active" href="documentation.html"><i class="fas fa-book"></i> Documentation</a>
                </div>
            </div>
            <div class="nav-footer">
                <a class="foot-link" href="https://github.com/cisagov/LME">LME on GitHub</a>
                <a class="foot-link" href="https://www.cisa.gov/resources-tools/services/logging-made-easy">CISA</a>
                <a class="foot-link" href="mailto:CyberSharedServices@cisa.dhs.gov">Contact Us</a>
            </div>
        </header>
        <main>
            <div class="top-search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search">
                    <button id="searchButton"><i class="fas fa-search"></i></button>
                </div>
                <div id="searchResults" class="search-results"></div>
            </div>
            <section>
                <div class="body-text">
                    <h1> Password Encryption</h2>
                        <p>Ansible-vault is used to enable password encryption, securely storing all LME user and
                            service
                            user
                            passwords at rest
                            We do submit a hash of the password to Have I Been Pwned to check to see if it is
                            compromised:
                            <a href="https://haveibeenpwned.com/FAQs">READ MORE HERE</a>, but since they&#39;re all
                            randomly
                            generated this should be rare.
                        </p>
                        <h2>Where Are Passwords Stored?:</h2>
                        <pre><code class="language-bash"><span class="comment"># Define user-specific paths</span>
USER_VAULT_DIR=&quot;/etc/lme/vault&quot;
PASSWORD_FILE=&quot;/etc/lme/pass.sh&quot;
</code></pre>
                        <h2>Grabbing Passwords:</h2>
                        <p>To view the appropriate service user password run the following commands:</p>
                        <pre><code><span class="comment">#script:</span>
$CLONE_DIRECTORY/scripts/extract_secrets.sh -p #to print

<span class="comment">#add them as variables to your current shell</span>
source $CLONE_DIRECTORY/scripts/extract_secrets.sh #without printing values
source $CLONE_DIRECTORY/scripts/extract_secrets.sh -q #with no output
</code></pre>
                        <h2>Manually Setting Up
                            Passwords and
                            Accessing Passwords Unsupported</h2>
                        <p><strong>These steps are not fully supported by CISA and are left if others would like to
                                support
                                this in
                                their environment</strong></p>
                        <p>Run the password_management.sh script:</p>
                        <pre><code class="language-bash">lme-user@ubuntu:~/LME-TEST$ sudo -i ${PWD}/scripts/password_management.sh -h
-i: Initialize all password environment variables and settings
-s: set_user: Set user password
-p: Manage Podman secret
-l: List Podman secrets
-h: print this list</code></pre>
                        <p>A cli one liner to grab passwords (this also demonstrates how we&#39;re using Ansible-vault
                            in
                            extract_secrets.sh):</p>
                        <pre><code class="language-bash"> <span class="comment">#where wazuh_api is the service user whose password you want:</span>
USER_NAME=wazuh_api
sudo -i ansible-vault view /etc/lme/vault/$(sudo -i podman secret ls | grep $USER_NAME | awk &#39;{print $1}&#39;)
</code></pre>
                </div>
            </section>
            <div class="page-navigation">
                <a href="configuration.html" class="nav-button prev-button">
                    <i class="fas fa-arrow-left"></i>
                    <span>Configuration</span>
                </a>
                <a href="troubleshooting.html" class="nav-button next-button">
                    <span>Troubleshooting</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </main>
    </div>
    <script src="assets/js/copy-code.js"></script>
    <script src="assets/js/search-bar.js"></script>
</body>

</html>